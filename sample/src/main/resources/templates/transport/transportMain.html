<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>

  <link rel="stylesheet" href="/css/transport.css">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

  <!-- Popper.js와 Bootstrap 순서로 로드 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <meta charset="UTF-8">
  <title>교통수단 추천</title>
</head>
<body onLoad="javascript:pop()">
<div th:replace="/fragments/nav.html :: fragment-nav"></div>
<div th:replace="/fragments/header.html :: fragment-header"></div>

<div id="carouselContainer">
  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="/images/image1.jpg" class="d-block w-100" alt="Slide 1">
      </div>
      <div class="carousel-item">
        <img src="/images/image2.jpg" class="d-block w-100" alt="Slide 2">
      </div>
      <div class="carousel-item">
        <img src="/images/image3.jpg" class="d-block w-100" alt="Slide 3">
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>

<hr>

<div class="container">
  <form th:action="@{transport/transportSearch}" method="post" class="mb-4">
    <div class="row">
      <!-- 왕복, 편도 선택 -->
      <div class="col-md-12 mb-4">
        <button type="button" class="btn btn-outline-primary" id="round-trip" onclick="toggleArrivalDate(true)">왕복</button>
        <button type="button" class="btn btn-outline-primary" id="one-way" onclick="toggleArrivalDate(false)">편도</button>
      </div>
      <!-- 교통수단 선택 -->
      <div class="col-md-2">
        <div class="form-group">
          <label for="transport-select">교통수단 선택</label>
          <select id="transport-select" name="transport" class="form-control">
            <option value="all">전체</option>
            <option value="airplane">비행기</option>
            <option value="train">기차</option>
            <option value="bus">버스</option>
          </select>
        </div>
      </div>

      <!-- 출발일 -->
      <div class="col-md-4">
        <div class="form-group">
          <label for="departure-date">출발일</label>
          <input type="date" id="departure-date" name="departureDate" class="form-control" onchange="setMinArrivalDate()">
        </div>
      </div>

      <!-- 도착일 -->
      <div class="col-md-4" id="arrival-date-container">
        <div class="form-group">
          <label for="arrival-date">돌아오는 날</label>
          <input type="date" id="arrival-date" name="arrivalDate" class="form-control" min="">
        </div>
      </div>

      <!-- 검색 버튼 -->
      <div class="col-md-2 d-flex align-items-center">
        <input type="submit" class="btn btn-primary btn-block" value="검색" style="margin-top: 20px;">
      </div>
    </div>
  </form>

  <script>
    // 도착일 필드를 숨기거나 보이게 하는 함수
    function toggleArrivalDate(isRoundTrip) {
      const arrivalDateContainer = document.getElementById('arrival-date-container');

      if (isRoundTrip) {
        // 왕복을 선택하면 도착일 필드 보이기
        arrivalDateContainer.style.display = 'block';
      } else {
        // 편도를 선택하면 도착일 필드 숨기기
        arrivalDateContainer.style.display = 'none';
      }
    }

    // 페이지 로딩 시 기본적으로 왕복으로 설정 (편도을 클릭했을 때 숨기기)
    document.addEventListener('DOMContentLoaded', function () {
      toggleArrivalDate(true); // 기본은 왕복
    });
  </script>

  <div class="row">
    <!-- 비행기 교통수단 -->
    <div class="col-md-4 mb-4">
      <div class="card">
        <a href="#">
        <img alt="비행기" class="card-img-top" src="/images/image1.jpg">
        <div class="card-body text-center">
          <h5 class="card-title">비행기</h5>
          <p class="card-price"><strong>가격: 1,200,000원</strong></p>
        </div>
        </a>
      </div>
    </div>

    <!-- 기차 교통수단 -->
    <div class="col-md-4 mb-4">
      <div class="card">
        <a href="#">
        <img alt="기차" class="card-img-top" src="/images/image1.jpg">
        <div class="card-body text-center">
          <h5 class="card-title">기차</h5>
          <p class="card-price"><strong>가격: 200,000원</strong></p>
        </div>
        </a>
      </div>
    </div>

    <!-- 버스 교통수단 -->
    <div class="col-md-4 mb-4">
      <div class="card">
        <a href="#">
        <img alt="버스" class="card-img-top" src="/images/image1.jpg">
        <div class="card-body text-center">
          <h5 class="card-title">버스</h5>
          <p class="card-price"><strong>가격: 50,000원</strong></p>
        </div>
        </a>
      </div>
    </div>
  </div>

</div>
<div th:replace="/fragments/footer.html :: fragment-footer"></div>
</body>
</html>